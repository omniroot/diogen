## Copilot / AI agent instructions for Diogen

Short, actionable guidance to be productive in this repo.

- **Big picture:** Diogen is a single-page React app (React 19) built with Vite and orchestrated with Bun-first scripts. Routing is file-based and generated by TanStack Router from `src/pages/` (see `vite.config.ts`). The app uses Appwrite for backend data (see `appwrite.config.json` and `src/api/appwrite.ts`).

- **Run & build:**
  - Local dev: `bun run dev` (uses `vite dev --port 5173 --host`).
  - Build: `bun run build` runs the custom script `./scripts/build.ts`.
  - Preview: `bun run preview` (Vite preview server).

- **Key scripts & tools:**
  - Formatting & lint: `bun run biome:format` and `bun run biome:lint` (Biome).
  - Type generation: `bun run typegen:appwrite` and `bun run typegen:chakra` — Appwrite types are generated into `src/api/types/`.
  - Commits: use `bun run commit` (Commitizen + conventional changelog).

- **Routing & codegen:**
  - Add pages under `src/pages/` to extend routes. The TanStack Router Vite plugin generates `./.tanstack/routeTree.gen.ts` which is imported in `src/main.tsx`.
  - When adding/removing files in `src/pages/` expect the generated tree to update on next dev/build run.

- **API & data patterns:**
  - Appwrite client config: `src/api/appwrite.ts` reads endpoint and project from `VITE_APPWRITE_PROJECT_ID` and `VITE_APPWRITE_ENDPOINT`.
  - Table definitions come from `appwrite.config.json` and are referenced by name in `src/api/appwrite.ts` (e.g., `habitsTable`, `postsTable`).
  - The app uses `@tanstack/react-query`; the `client` is provided in `src/main.tsx` (see `src/api/api.ts`).

- **Styling & theming:**
  - Chakra UI + a custom provider `OmnikitProvider` (see `src/theme/components/provider.tsx`) is used for theming.
  - Vite's `postcss` purge is configured in `vite.config.ts` — follow component-level class usage to avoid purge mistakes.

- **Conventions & patterns:**
  - Keep API helpers in `src/api/` and centralize Appwrite access in `src/api/appwrite.ts`.
  - Follow file-route pattern for pages under `src/pages/` so route generation stays consistent.
  - Use existing query keys/hooks factories (search for `keyFactory`) for consistent cache keys.
  - Use Bun to run scripts locally where possible; adjust commands if using npm/yarn.

- **Examples / quick refs:**
  - App root & providers: `src/main.tsx`.
  - Root layout: `src/pages/__root.tsx` (shows `AuthProvider`, `Sidebar`, `Header`).
  - Appwrite wiring: `src/api/appwrite.ts`.

- **Dev notes:**
  - After changing Appwrite tables or schemas run `bun run typegen:appwrite`.
  - Run `bun run biome:format` before linting or commits.
  - There are no unit tests in the repo currently; validate changes via `bun run dev` and manual QA.

If you want this expanded (examples for creating a new page, typical Appwrite query patterns, or a PR checklist), tell me which section to expand.
